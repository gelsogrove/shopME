{
  "name": "ShopMe WhatsApp Workflow11",
  "nodes": [
    {
      "parameters": {},
      "id": "0a9e6ac2-dd90-4826-a527-a97da1ef4837",
      "name": "Continue Processing",
      "type": "n8n-nodes-base.noOp",
      "typeVersion": 1,
      "position": [
        -40,
        100
      ]
    },
    {
      "parameters": {},
      "id": "8cd2f097-d29f-47b7-92e0-5dbab165942e",
      "name": "Stop Workflow Blacklist",
      "type": "n8n-nodes-base.noOp",
      "typeVersion": 1,
      "position": [
        -40,
        -220
      ]
    },
    {
      "parameters": {
        "conditions": {
          "boolean": [
            {
              "value1": "={{$json[\"precompiledData\"][\"customer\"][\"isBlacklisted\"]}}",
              "operation": "=equal",
              "value2": "={{ true }}"
            },
            {
              "value1": "={{$json[\"precompiledData\"][\"businessInfo\"][\"isActive\"]}}",
              "value2": "={{ false }}"
            },
            {
              "value1": "={{$json[\"precompiledData\"][\"customer\"][\"activeChatbot\"]}}",
              "operation": "=equal",
              "value2": "={{ false }}"
            }
          ]
        },
        "combineOperation": "any"
      },
      "id": "1aa94d0b-0812-4413-ae32-8c214f2a177b",
      "name": "Check Blacklist",
      "type": "n8n-nodes-base.if",
      "typeVersion": 1,
      "position": [
        -260,
        -60
      ]
    },
    {
      "parameters": {
        "jsCode": "// Loop over input items and add a new field called 'myNewField' to the JSON of each one\nfor (const item of $input.all()) {\n  item.json.myNewField = 1;\n}\n\nreturn $input.all();"
      },
      "id": "f0a57c23-be69-4101-83cd-a498a4147963",
      "name": "Set Input Object",
      "type": "n8n-nodes-base.code",
      "typeVersion": 1,
      "position": [
        -440,
        -60
      ]
    },
    {
      "parameters": {
        "httpMethod": "POST",
        "path": "webhook-start",
        "options": {}
      },
      "id": "2a68b801-89e8-4d53-ac60-68a47e146d15",
      "name": "Webhook",
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 1,
      "position": [
        -640,
        -60
      ],
      "webhookId": "3be8d24a-6a91-4a00-94d3-609e253398cb"
    }
  ],
  "pinData": {},
  "connections": {
    "LLM Router (Intent Classification)": {
      "main": [
        [
          {
            "node": "Needs RAG Search?",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "LLM Formatter (Response Generation)": {
      "main": [
        [
          {
            "node": "Save Inbound Message",
            "type": "main",
            "index": 0
          },
          {
            "node": "Send WhatsApp Response",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Check Blacklist": {
      "main": [
        [
          {
            "node": "Stop Workflow Blacklist",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Continue Processing",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Set Input Object": {
      "main": [
        [
          {
            "node": "Check Blacklist",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Webhook": {
      "main": [
        [
          {
            "node": "Set Input Object",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": true,
  "settings": {
    "executionOrder": "v1"
  },
  "versionId": "93e56c30-4455-4c32-b4cf-4e710ecb8d82",
  "meta": {
    "instanceId": "5ae2a7363ad016a6fce9a21805f9e7da3dfed9cc4777afa6d055110c871b8f65"
  },
  "id": "YMI7HF0uNZiza2fT",
  "tags": []
}